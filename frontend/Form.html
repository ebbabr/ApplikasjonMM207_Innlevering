<html>
    <head>
 
        <title></title>

    </head>

<body>
    <body style="background-color:lightgrey;"></body>

    <button id = 'backwards' class="buttonClass">Back</button>
    <br>
    <br>
    <div container id="placeHere" class="placeHere">
        <input id="inputUsername" type="text" name="userName" placeholder="Name" />
        <input id="inputEvent" type="text" name="eventID" placeholder="event ID" />
        <br>
        <br>

    <label for = "myAllergy"> Write allergy or preferences </label>
    <input id = "myAllergy" name = "allergy" type = "text";>
    <button id = "myButton"> Add </button>
    <h2 id = "text"></h2>
    <div id = "myList" ></div>

    <br />
    <br>

    <button id="btnSend" class="sendIn">Send in</button>
    



    <script>

let btnSend = document.getElementById('btnSend');
  let inputs = document.querySelectorAll('input');
  console.log(inputs);

  const data = {};

  btnSend.addEventListener('click', () => {
    inputs.forEach((input) => {
    data[input.attributes["name"].value] = input.value;
  })

  sendToServer(data);
  })

  async function sendToServer(data) {
    const response = await fetch("/event", {
      method: "POST",
      headers: {"Content-Type": "application/json" },
      body: JSON.stringify(data)
    })

    return response.json();
  }

        let myButton = document.getElementById ('myButton');
        let myAllergy = document.getElementById ('myAllergy');
        let myList = document.getElementById ('myList');
        let devider = document.createElement('li');
        let backwardsBtn = document.getElementById('backwards');
        
        backwardsBtn.addEventListener('click', function(evt){
            location.href = 'index.html';
        })
        

        let person = [];

        function createAllergy (myAllergy){
            this.object = {
                Allergy: myAllergy,
               

            };

            person.push (object);

        }


        myButton.addEventListener('click', function(evt){

            createAllergy (myAllergy.value);


       for (let i = 0; i < person.length; i++) {
           
           
         
           myList.appendChild(devider).innerHTML += ` ${person[i].Allergy}`;
           myList.innerHTML += ``;

           person = [];
       
       }
           
       
        });

    </script>
</html>


